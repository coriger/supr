KISSY.add("app/rec-list",function(a,b,c,d,e,f){function o(a){var c=1;a==0&&(c=0);var d;for(var f=0,h=i.length;f<h;f++)if(i[f].type==c){d=i.splice(f,1);break}if(!d){if(i.length==0){b.remove(j+a,k);if(a==0||!!m)m=!0,p();return}d=i.splice(0,1)}g(j+a).innerHTML=e(n).render({datas:d})}function p(){var a=b.query("li",k);if(a.length<2){q();return}b.addClass(a[0],"first")}function q(){b.remove(k,"#aside")}var g=b.get,h=c.on,i=ENV.friendList,j="#recList-",k="#rec-friend-list",l,m=!1,n=["{{#each datas}}",'<a target="_blank" href="http://{{_ks_value.blogUrl}}">','<span data-id="{{_ks_value.blogId}}" class="sidemenu-item-follow js-editor-action" title="\u5173\u6ce8{{_ks_value.blogName}}" /></span>','<span class="aside-editor-avatar" style="background:url({{_ks_value.blogPic}})"></span>','<span class="aside-editor-name">{{_ks_value.blogName}}</span>','<span class="aside-editor-title">',"{{#if _ks_value.type == 0}}","#{{_ks_value.tagList}}","{{#else}}","{{_ks_value.tagList}}","{{/if}}",'<s data-id="{{_ks_value.blogId}}" class="myhide" href="#" title="\u4e0d\u611f\u5174\u8da3">X</s>',"</span>","</a>","{{/each}}"].join(""),r={init:function(){o(0),o(1),o(2),h("#rec-friend-list","mouseover",function(a){var c=a.target,d=c.tagName.toLowerCase()=="li"?c:b.parent(c,"li");if(!!l){var e=b.query("s",l);b.addClass(e,"myhide")}l=d;var e=b.query("s",d);b.removeClass(e,"myhide")}),h("#rec-friend-list","mouseleave",function(){var a=b.query("s",l);b.addClass(a,"myhide")}),h("#rec-friend-list","click",function(a){var c=a.target,e=b.attr(b.parent(c,"li"),"id").split("-")[1];if(b.hasClass(c,"js-editor-action")){a.halt();var g=b.attr(c,"data-id");d({type:"post",url:"http://www.diandian.com/follow?rcd_f_src=1",data:{id:g},success:function(a){if(a.status_code!=0){alert(a.result),o(e);return}var d=b.parent(c);DD.globalNotify(b.attr(c,"title")+"\u6210\u529f"),o(e)}}),f.log("aside-recommand-follow")}else if(c.tagName.toLowerCase()=="s"){a.halt();var h=b.attr(c,"data-id");o(e),d({type:"post",url:"http://www.diandian.com/tagRcd/notInterested",data:{blogIds:h},success:function(a){a.result!=0&&alert("\u64cd\u4f5c\u6709\u8bef\uff01")}}),f.log("aside-recommand-not-interested")}else f.log("aside-recommand-link-click")})}};return r},{requires:["dom","event","ajax","template","util.$7202"]});