<?xml version="1.0" encoding="UTF-8" ?>  
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">  
  
<mapper namespace="com.supr.blog.mapper.ModelMapper">
	
	<sql id="modelList">
		<if test="model.tId != null and model.tId !='-1'">
		 	and trade.Id = #{model.tId}
		</if>
		<if test="model.rmName != null and model.rmName != ''">
			and model.rmName like CONCAT('%','${model.rmName}','%' ) 
		</if>
	</sql>
	
	<!-- 获取模型总数 -->
	<select id="getModelCount" resultType="int" parameterType="map">
		select count(model.Id) from e_res_mould model 
		inner join e_trade trade on model.tId = trade.Id 
		where 1 = 1 
		<include refid="modelList"/>
	</select>
	
	<!-- 获取模型列表 -->
	<select id="getModelList" resultType="com.supr.blog.model.cmge.Model" parameterType="map">
		select model.*,trade.rtName from e_res_mould model 
		inner join e_trade trade on model.tId = trade.Id 
		where 1 = 1 
		<include refid="modelList"/>
		limit #{startIndex},#{pageSize} 
	</select>
	
	<!-- 获取行业列表 -->
	<select id="getTradeList" resultType="com.supr.blog.model.cmge.Trade">
		select * from e_trade 
	</select>
	
	<!-- 批量删除模型 -->
	<delete id="deleteBatch" parameterType="String">
		delete from e_res_mould where Id in 
		<foreach collection="array" item="modelIds" index="index" open="(" close=")" separator=","> 
            #{modelIds}
        </foreach>
	</delete>
	
	<!-- 根据Id获取模型 -->
	<select id="getModelById" resultType="com.supr.blog.model.cmge.Model" parameterType="String">
		select * from e_res_mould where Id = #{modelId}
	</select>
	
</mapper>